<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .error { color: red; }
        .success { color: green; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>üîç Frontend Debug Test</h1>
    
    <div class="test-section">
        <h2>üì± React App Test</h2>
        <p>Testing if the React app loads properly:</p>
        <div id="react-app-status">Loading...</div>
        <div id="react-app-content"></div>
    </div>
    
    <div class="test-section">
        <h2>üñºÔ∏è Logo Test</h2>
        <p>Testing logo accessibility:</p>
        <div id="logo-test">
            <img src="/transparent-partners-logo-white.png" alt="White Logo" width="200" onload="logSuccess('Logo loaded successfully')" onerror="logError('Logo failed to load')">
            <p>Path: /transparent-partners-logo-white.png</p>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üåê API Test</h2>
        <p>Testing API connectivity:</p>
        <div id="api-test">Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>üìã Console Logs</h2>
        <p>Check browser console for detailed logs:</p>
        <div id="console-logs"></div>
    </div>

    <script>
        // Test React app loading
        async function testReactApp() {
            const statusDiv = document.getElementById('react-app-status');
            const contentDiv = document.getElementById('react-app-content');
            
            try {
                // Wait a bit for React to load
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Check if React app elements exist
                const header = document.querySelector('[data-testid="header"]') || document.querySelector('header') || document.querySelector('.header');
                const signInButton = document.querySelector('button') && document.querySelector('button').textContent.includes('Sign In');
                
                if (header || signInButton) {
                    statusDiv.innerHTML = '<span class="success">‚úÖ React app loaded successfully</span>';
                    contentDiv.innerHTML = '<p>Header found: ' + (header ? 'Yes' : 'No') + '</p>';
                    contentDiv.innerHTML += '<p>Sign In button found: ' + (signInButton ? 'Yes' : 'No') + '</p>';
                } else {
                    statusDiv.innerHTML = '<span class="warning">‚ö†Ô∏è React app may not be fully loaded</span>';
                    contentDiv.innerHTML = '<p>Checking for React elements...</p>';
                }
            } catch (error) {
                statusDiv.innerHTML = '<span class="error">‚ùå Error testing React app: ' + error.message + '</span>';
            }
        }
        
        // Test API connectivity
        async function testAPI() {
            const apiDiv = document.getElementById('api-test');
            try {
                const response = await fetch('https://agent-backend-dx7q5hdbiq-uc.a.run.app/api/agents');
                if (response.ok) {
                    apiDiv.innerHTML = '<span class="success">‚úÖ API accessible</span>';
                } else {
                    apiDiv.innerHTML = '<span class="warning">‚ö†Ô∏è API responded with status: ' + response.status + '</span>';
                }
            } catch (error) {
                apiDiv.innerHTML = '<span class="error">‚ùå API error: ' + error.message + '</span>';
            }
        }
        
        // Logging functions
        function logSuccess(message) {
            console.log('‚úÖ', message);
            addConsoleLog('‚úÖ ' + message);
        }
        
        function logError(message) {
            console.error('‚ùå', message);
            addConsoleLog('‚ùå ' + message);
        }
        
        function addConsoleLog(message) {
            const logsDiv = document.getElementById('console-logs');
            const logEntry = document.createElement('div');
            logEntry.textContent = new Date().toLocaleTimeString() + ': ' + message;
            logsDiv.appendChild(logEntry);
        }
        
        // Run tests
        console.log('üîç Starting frontend debug tests...');
        testReactApp();
        testAPI();
        
        // Monitor for errors
        window.addEventListener('error', (event) => {
            logError('JavaScript error: ' + event.message + ' at ' + event.filename + ':' + event.lineno);
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            logError('Unhandled promise rejection: ' + event.reason);
        });
    </script>
</body>
</html>
